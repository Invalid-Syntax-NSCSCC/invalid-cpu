#!/usr/bin/env bash

ARGS='-O=release --add-vivado-ram-address-conflict-synthesis-bug-workaround --preserve-aggregate=1d-vec --dedup --disable-annotation-unknown'

# Workaround
for arg do
  shift
  case $arg in
    (-disable-infer-rw) : ;;
        (*) set -- "$@" "$arg" ;;
  esac
done

if [[ "$OSTYPE" == "darwin"* ]]; then
    firtool_darwin -O=release --add-vivado-ram-address-conflict-synthesis-bug-workaround --preserve-aggregate=1d-vec --dedup --disable-annotation-unknown "$@"
else
    firtool_ubuntu2004 -O=release --add-vivado-ram-address-conflict-synthesis-bug-workaround --preserve-aggregate=1d-vec --dedup --disable-annotation-unknown "$@"
fi
